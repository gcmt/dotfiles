#!/bin/bash

current_workspace_name() {
	i3-msg -t get_workspaces \
		| jq '.[] | select(.focused==true).name' \
		| cut -d "\"" -f 2
}

style="-width 25"
style="$style -theme-str 'listview { enabled: false; }'"
style="$style -theme-str 'case-indicator { enabled: false; }'"
style="$style -theme-str 'prompt { enabled: true; }'"

options="-dmenu -p 'New name: ' -filter '$(current_workspace_name)' "

name=$(echo "" | eval "rofi $options $style")
if [[ -z "$name" ]]; then
	exit 1
fi

i3-msg "rename workspace to \"$name\""
