#!/bin/bash

new_window=0
while getopts "n" OPT; do
	case $OPT in
		n) new_window=1 ;;
	esac
done
shift $((OPTIND -1))

if (( $new_window == 1 )); then
	exec urxvt -e t "$1"
else
	# If the tmux session is already opened, switch to it
	session=$(t -d "$1")
	cmd="[title=\"^$session - Tmux\"] focus"
	if i3-msg "$cmd" 2>/dev/null | grep -q false; then
		exec urxvt -e t "$session"
	fi
fi
