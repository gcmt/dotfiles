#!/bin/bash

opts="-dmenu -format i -theme 'main-light'"
opts+=" -theme-str 'window { width: 25%; }'"
opts+=" -theme-str 'listview { fixed-height: false; scrollbar: false; }'"
opts+=" -theme-str 'case-indicator { enabled: false; }'"

if [[ ! "$*" =~ -inputbar($| ) ]]; then
    opts+=" -theme-str 'mainbox { children: [listview]; }'"
    opts+=" -kb-row-up 'Up,Control+k,k' -kb-row-down 'Down,Control+j,Super+Tab,j'"
    opts+=" -kb-accept-entry 'l,Return,Control+d' -kb-cancel 'Escape,q'"
fi

entries="notes\\nlogbook\\ntodo"

files=(
    "$HOME/Docs/notes/wall.md"
    "$HOME/Docs/logbook/$(date '+%Y-%m-%d').txt"
    "$HOME/Docs/todo.md"
)

idx=$(echo -e "$entries" | eval "rofi $opts")
if [[ -z "$idx" ]]; then
	exit 1
fi

exec urxvt -name floating -e vim "${files[$idx]}" +'cd %:p:h'
