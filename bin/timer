#!/bin/bash

fifo="/tmp/polybar_timer.fifo"
if [[ ! -p "$fifo" ]]; then
	exit 1
fi

if [[ "$1" == start || "$1" =~ [0-9]+ ]]; then

	seconds="$(toseconds "$@")"
	(( seconds > 0 )) || exit 1
	echo "start $seconds" > "$fifo"

elif [[ "$1" == toggle ]]; then

	seconds="$(toseconds "$@")"
	(( seconds > 0 )) || exit 1
	echo "toggle $seconds" > "$fifo"

elif [[ "$1" == stop ]]; then

	echo "stop" > "$fifo"

else

	echo 2>&1 "Usage: timer [start|stop|toggle] [durations]"
	exit 1

fi
