
set -s escape-time 0
set -s focus-events on
set -s set-clipboard off

set -s default-terminal "xterm-256color"
set -sa terminal-overrides ",xterm*:Tc"

set -g mouse on

set -g renumber-windows on
setw -g automatic-rename on

set -g base-index 1
setw -g pane-base-index 1

set -g set-titles on
set -g set-titles-string '#S - Tmux'

set -g visual-bell off
set -g visual-activity off
setw -g monitor-activity off

setw -g display-panes-colour brightwhite
setw -g display-panes-active-colour magenta

setw -g mode-bg white
setw -g mode-fg black

set -g message-fg black
set -g message-bg white
set -g message-command-fg black
set -g message-command-bg white

set -g pane-border-fg white
set -g pane-active-border-fg white

set -g status-interval 2
set -g status-position bottom
set -g status-justify left
set -g status-bg brightblack
set -g status-fg white

set -g status-left-length 40
set -g status-left "#[bg=brightblack]#[fg=white] #S #[bg=black] "

# ‹
set -g status-right-length 40
set -g status-right "#[bg=black] #[bg=default] #(whoami)@#H ‹ %a %d %H:%M "

setw -g window-status-format "#[bg=default] #I #W#{?window_zoomed_flag, [z],} #[bg=black] "
setw -g window-status-current-format "#[bg=white]#[fg=black] #I #W#{?window_zoomed_flag, [z],} #[bg=black] "
setw -g window-status-activity-style "fg=red"
setw -g window-status-separator ""

set -g prefix C-x

unbind C-b
bind C-x send-prefix

setw -g mode-keys vi
setw -g status-keys emacs

# vi-like copy mode
bind -T copy-mode-vi q send -X cancel \; send Escape 'a'
bind -T copy-mode-vi C-c send -X cancel \; send Escape 'a'
bind -T copy-mode-vi Escape send -X clear-selection
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection \; display ' copied'
bind -T copy-mode-vi a send -X append-selection \; display ' appended'
bind -T copy-mode-vi + send -X copy-pipe 'xclip -sel clip' \; send -X clear-selection \; display ' copied to system clipboard'
bind -T copy-mode-vi J send -X -N 3 cursor-down
bind -T copy-mode-vi K send -X -N 3 cursor-up
bind -T copy-mode-vi H send -X start-of-line
bind -T copy-mode-vi L send -X end-of-line
bind -T copy-mode-vi C-k send -X previous-paragraph
bind -T copy-mode-vi C-j send -X next-paragraph
bind -T copy-mode-vi C-f command-prompt -p "search-forward:" "send -X search-forward \"%%%\""
bind -T copy-mode-vi C-b command-prompt -p "search-backward:" "send -X search-backward \"%%%\""
unbind -T copy-mode-vi MouseDragEnd1Pane

# before entering copy-mode, set block-shaped cursor for better visibility
bind [ send Escape \; run 'sleep 0.05' \; copy-mode
bind ? send Escape \; run 'sleep 0.05' \; list-keys

# cosmetic fixes
bind , command-prompt -p "rename-window:" -I "#W" "rename-window '%%'"
bind '$' command-prompt -p "rename-session:" -I "#S" "rename-session '%%'"

# confirm detaching
bind d confirm-before -p "detach-client? (y/n)" detach-client

# split window using the current path
bind '"' split-window -h -c "#{pane_current_path}"
bind % split-window -v -c "#{pane_current_path}"

# pane resizing
bind -r H resize-pane -L 2
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 2

# pane navigation
bind h select-pane -L
bind j select-pane -D
bind l select-pane -R
bind k select-pane -U
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-l select-pane -R
bind -n M-k select-pane -U

# window navigation
bind -r p select-window -t :-
bind -r n select-window -t :+
bind -n M-p select-window -t :-
bind -n M-n select-window -t :+
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 7
bind -n M-9 select-window -t 9

# move windows
bind -r P swap-window -t -1
bind -r N swap-window -t +1

# create new window (if a name is given then a named window is created)
bind c command-prompt -p "new-window:" "if -F '%1' 'new-window -n \"%1\" -c \"#{pane_current_path}\"' 'new-window -c \"#{pane_current_path}\"'"

# set automatic window renaming
bind \; setw automatic-rename on

# go to the last visited window
bind a last-window

# rotate windows
bind O rotate-window -U

# switch to the scratch session
bind _ attach -t scratch

# reload config file
bind r source-file ~/.tmux.conf \; display " config reloaded!"
